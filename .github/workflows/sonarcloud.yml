name: SonarCloud analysis

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

permissions:
  pull-requests: read # allows SonarCloud to decorate PRs with analysis results
  
jobs:
    Build:
      runs-on: ubuntu-latest
      
      steps:
      - name: .Net Build
        # You may pin to the exact commit or the version.
        # uses: EasyDesk/action-dotnet-build@d2c47d8701e3ea8db03dcabaacb37204fe123a22
        uses: EasyDesk/action-dotnet-build@v1.0.0
        with:
        # Additional build arguments to pass to 'dotnet build'.
        build-args: # optional
        # The build configuration to use (defaults to 'Release').
        build-configuration: # optional, default is Release
        # The path to the project or solution to build (defaults to the current directory).
        path: # optional, default is .

# jobs:
#  Analysis:
#    runs-on: ubuntu-latest
#    
#    steps:
#      - name: Analyze with SonarCloud         
#
#        # You can pin the exact commit or the version.
#       # uses: SonarSource/sonarcloud-github-action@de2e56b42aa84d0b1c5b622644ac17e505c9a049
#        uses: SonarSource/sonarcloud-github-action@v1.7
#       env:
#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # Needed to get PR information
#          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}   # Generate a token on Sonarcloud.io, add it to the secrets of this repo with the name SONAR_TOKEN (Settings > Secrets > Actions > add new repository secret)
#        with:
#          # Additional arguments for the sonarcloud scanner
#          args:             
#            # Unique keys of your project and organization. You can find them in SonarCloud > Information (bottom-left menu)
#            # mandatory
#            -Dsonar.projectKey=Sakuilim_RunnersBlog-Web-Site
#            -Dsonar.organization=sakuilim
#            # Comma-separated paths to directories containing main source files.
#            #-Dsonar.sources= # optional, default is project base directory
#            # When you need the analysis to take place in a directory other than the one from which it was launched
#            #-Dsonar.projectBaseDir= # optional, default is .
#            # Comma-separated paths to directories containing test source files.
#            #-Dsonar.tests= # optional. For more info about Code Coverage, please refer to https://docs.sonarcloud.io/enriching/test-coverage/overview/
#            # Adds more detail to both client and server-side analysis logs, activating DEBUG mode for the scanner, and adding client-side environment variables and system properties to the server-side log of analysis report processing.
#            #-Dsonar.verbose= # optional, default is false   
